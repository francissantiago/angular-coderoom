
<div class="certificate-wrapper fixed inset-0 bg-black/80 z-[100] flex flex-col items-center overflow-auto p-4 print:bg-white print:p-0 print:static print:block">
  
  <!-- Controls (Hidden on Print) -->
  <div class="no-print flex gap-4 mb-4 z-50 sticky top-0 pt-4">
    <button (click)="onPrint()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded shadow-lg transition-colors flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z" clip-rule="evenodd" /></svg>
      Imprimir PDF
    </button>
    <button (click)="onClose()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded shadow-lg transition-colors">
      Fechar
    </button>
  </div>

  <!-- Certificate FRONT -->
  <div class="certificate-container mx-auto">
    <div class="ornamental-border">
      <div class="inner-border text-center">
        
        <!-- Header -->
        <div class="mb-8">
          <h1 class="text-5xl font-cinzel text-[#1a365d] mb-2 tracking-wider uppercase">Certificado de Conclusão</h1>
          <div class="h-1 w-32 bg-[#c0b48c] mx-auto"></div>
        </div>

        <!-- Body -->
        <p class="text-xl text-gray-600 mb-4 font-serif italic">Certificamos que</p>
        
        <h2 class="text-6xl font-cursive text-[#2d3748] mb-6 p-4 border-b border-gray-300 inline-block min-w-[50%]">
          {{ student().name }}
        </h2>

        <p class="text-xl text-gray-600 mb-2 font-serif italic">concluiu com êxito o curso de</p>
        
        <h3 class="text-4xl font-bold text-[#1a365d] mb-10 uppercase tracking-wide">
          {{ classGroup().name }}
        </h3>

        <p class="text-lg text-gray-600 mb-12 max-w-3xl mx-auto leading-relaxed">
          Demonstrando dedicação e competência nos módulos ministrados, cumprindo a carga horária e os requisitos acadêmicos propostos pela Angular CodeRoom.
        </p>

        <!-- Footer / Signatures -->
        <div class="w-full flex justify-around items-end mt-auto mb-12 px-16">
          <div class="text-center">
            <div class="w-64 border-t border-black mb-2"></div>
            <p class="text-lg font-bold text-[#1a365d]">Angular CodeRoom</p>
            <p class="text-sm text-gray-500">Instituição de Ensino</p>
          </div>
          
          <div class="text-center">
            <div class="w-64 border-t border-black mb-2"></div>
            <p class="text-lg font-bold text-[#1a365d]">Diretoria Acadêmica</p>
            <p class="text-sm text-gray-500">Assinatura Responsável</p>
          </div>
        </div>

        <!-- Metadata -->
        <div class="absolute bottom-4 right-6 text-right">
          <p class="text-xs text-gray-400 font-mono">Certificado ID: {{ certificate().validationCode }}</p>
          <p class="text-xs text-gray-400 font-mono">Emitido em: {{ certificate().issueDate | date:'dd/MM/yyyy' }}</p>
        </div>

        <!-- Badge/Seal Placeholder -->
        <div class="absolute bottom-8 left-8 opacity-80">
             <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="50" cy="50" r="45" stroke="#c0b48c" stroke-width="2" stroke-dasharray="4 2"/>
                <circle cx="50" cy="50" r="35" stroke="#1a365d" stroke-width="4"/>
                <path d="M50 25 L55 40 L70 40 L58 52 L63 67 L50 58 L37 67 L42 52 L30 40 L45 40 Z" fill="#c0b48c"/>
             </svg>
        </div>

      </div>
    </div>
  </div>

  <!-- Certificate BACK (Curriculum) -->
  <div class="certificate-container mx-auto">
    <div class="ornamental-border">
      <div class="inner-border back-page-content">
        
        <!-- Header Back -->
        <div class="w-full border-b-2 border-[#1a365d] mb-6 pb-2 flex justify-between items-end">
            <div>
                <h2 class="text-2xl font-cinzel text-[#1a365d] font-bold">Conteúdo Programático</h2>
                <p class="text-sm text-gray-500">{{ classGroup().name }}</p>
            </div>
            <div class="text-right">
                <p class="text-sm font-bold text-gray-700">{{ student().name }}</p>
                <p class="text-xs text-gray-500">Matrícula: {{ student().enrollmentNumber }}</p>
            </div>
        </div>

        <!-- Curriculum Table -->
        <div class="w-full flex-grow">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="bg-[#1a365d] text-white">
                        <th class="p-2 text-sm uppercase font-bold border border-[#1a365d]">Módulo / Aula</th>
                        <th class="p-2 text-sm uppercase font-bold border border-[#1a365d]">Descrição do Conteúdo</th>
                        <th class="p-2 text-sm uppercase font-bold border border-[#1a365d] text-center w-32">Carga Horária</th>
                    </tr>
                </thead>
                <tbody>
                    @for(lesson of classGroup().lessons; track lesson.id) {
                        <tr class="even:bg-gray-100">
                            <td class="p-2 text-sm border border-gray-300 font-semibold text-gray-800">{{ lesson.title }}</td>
                            <td class="p-2 text-sm border border-gray-300 text-gray-600">{{ lesson.description }}</td>
                            <td class="p-2 text-sm border border-gray-300 text-center">{{ lesson.standardDuration }}h</td>
                        </tr>
                    }
                    @if(!classGroup().lessons || classGroup().lessons.length === 0) {
                        <tr>
                            <td colspan="3" class="p-8 text-center italic text-gray-500 border border-gray-300">Conteúdo programático não registrado.</td>
                        </tr>
                    }
                </tbody>
                <tfoot>
                    <tr class="bg-gray-200 font-bold">
                        <td colspan="2" class="p-2 text-right border border-gray-300 text-[#1a365d]">CARGA HORÁRIA TOTAL</td>
                        <td class="p-2 text-center border border-gray-300 text-[#1a365d]">{{ totalHours() }} Horas</td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <!-- Footer Back -->
        <div class="w-full mt-8 pt-4 border-t border-gray-300 text-center">
            <p class="text-xs text-gray-500">Este documento é parte integrante do Certificado de Conclusão ID: <span class="font-mono font-bold">{{ certificate().validationCode }}</span>.</p>
            <p class="text-xs text-gray-500">Angular CodeRoom - Plataforma de Ensino de Programação</p>
        </div>

      </div>
    </div>
  </div>

</div>
